<html>
    
    <head>
        
        <title></title>
        <meta charset="UTF-8">  
        
        <!-- <meta http-equiv="refresh" content=1;url="www.jmarysystems.com.br"> -->    
        
        <meta name="viewport" content="width=device-width, initial-scale=1.0">    
        
        <script type="text/javascript" src='../arquivos/js/js_controle_de_validade/0001_01_adicionar_produto.js'></script>
        <script type="text/javascript" src='../arquivos/js/js_controle_de_validade/0002_01_pesquisar_dados_dos_produtos_imagens_e_listar.js'></script>
        <script type="text/javascript" src='../arquivos/js/js_controle_de_validade/0002_02_adicionando_produto_ao_html.js'></script>
        <script type="text/javascript" src='../arquivos/js/js_controle_de_validade/0003_01_enviando_produto_proximo_do_vencimento.js'></script>
        
        <script type="text/javascript" src='../arquivos/js/js_controle_de_validade/0004_01_baixar_tabela_de_produtos_proximos_do_vencimento.js'></script>
        <script type="text/javascript" src='../arquivos/js/js_controle_de_validade/0004_02_listar_produtos_da_tabela_de_produtos_proximos_do_vencimento.js'></script>
        <script type="text/javascript" src='../arquivos/js/js_controle_de_validade/0004_03_listar_produtos_locais_javascript.js'></script>
        <script type="text/javascript" src='../arquivos/js/js_controle_de_validade/0004_04_adicionando_produto_a_lista_html.js'></script>
        
        <!-- <script type="text/javascript" src='../arquivos/js/js_produto_por_ean/zzzz_dados_produtos.js'></script> --> 
        <!-- <script type="text/javascript" src='https://sites.google.com/site/jmarysystemslogin/zzzz_dados_produtos.js'></script> --> 
        <script type="text/javascript" src='../../../../../../lista_de_produtos_javascript.js'></script> 
        
        <script type="text/javascript" src='../arquivos/js/js_produto_por_ean/9999_1_utilitario_baixar_imagem.js'></script>

        
        <script type="text/javascript" src='../arquivos/js/imprimir_div.js'></script>
        
        <script type="text/javascript" src='../arquivos/js/jquery.js'></script>
        
        <script type="text/javascript" src='../arquivos/js/js_quagga/quagga.min.js'></script>
       
        <style>          
        </style>
    </head>
    
    <body 
        style="background-color: #D3D3D3; width: 100%; height: 100%; padding: 0; margin: 0;
               font-family: Arial, Helvetica, sans-serif; font-size: 14px; color: black; line-height: 1.5;" > 
        
        
<!-- input(S) ################################################################# -->         
        <input type="hidden" id="usuario_logado_id_nome" value="null">
<!-- input(S) ################################################################# -->   

<!-- input(S) ################################################################# -->         
        <input type="hidden" id="usuario_logado_id_" value="null">
<!-- input(S) ################################################################# -->     
        
    <input type="hidden" id="tabela_de_produtos_proximos_do_vencimento_xls" value="null">

<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
-0 
-1
-2
- #### MENU INÍCIO #### --> 
<!-- 
-0
-1
-2    
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->   
<div id="topo_menu_xx" style="display: none; background-color: #3A3A3A; 
            width:            100%; 
            height:           50px; 
            padding:          0; 
            margin:           0;    
            z-index:200;
            position: relative;
            " >
    
<ul style="list-style:none; padding: 0px; margin: 0px; height: 100%; z-index:199;">
   
    
    
<!-- 
-0
-1
-2
 --> 
<!--- #### COLUNA 1 INÍCIO #### --> 
<!-- 
-0
-1
-2    
-->
    <li 
        style="
            height: 100%; float:    left;    position: relative; 
            width:  100%; overflow: visible;"
        
        onMouseover="
            this.style.backgroundColor='#23871C'; 
            this.style.color='#3A3A3A';  
            document.getElementById('coluna11tb').style.display = 'block'; "
            
        onMouseout="
            this.style.backgroundColor='#3A3A3A';                               
            document.getElementById('coluna11tb').style.display = 'none';  "
    >
        
        <a 
            id="cara_palida"
            style="
                float:           left;
                color:           #fff; font-family:  Arial, Helvetica, sans-serif; 
                font-size:       19px; padding-left: 10px; 
                padding-right:   10px; line-height:  50px; 
                text-decoration: none;"
           
            onMouseover=" this.style.color='black'; "
            onMouseout="  this.style.color='#fff'; "       
        > 
            -)-> CONTROLE DE VALIDADE <-(- </a>  
        
        <a 
            href="controle_de_validade_0002_01_visualizar_produto.html" 
            style="
                float:           right;
                color:           #fff; font-family:  Arial, Helvetica, sans-serif; 
                font-size:       19px; padding-left: 10px; 
                padding-right:   10px; line-height:  50px; 
                text-decoration: none;"
           
            onMouseover=" this.style.color='black'; "
            onMouseout="  this.style.color='#fff'; "       
        > 
            Sair </a>  
        
    </li>  
<!-- 
-0,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,
-1
-2
- #### COLUNA 1 FIM #### --> 
<!-- 
-0
-1
-2    
-->








</ul>
</div>
<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
-0
-1
-2
- #### MENU FIM #### --> 
<!-- 
-0
-1
-2    
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++--> 












        
    
    
    
    
 

    
<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
-0
-1
-2
- #### div_mostrar_produto #### --> 
<!-- 
-0
-1             
-2    
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++--> 
<div id="div_mostrar_produto" style="display: block; padding: 0; margin: 0; width:100%; height: 100%;">
    
<ul style="list-style:none; padding: 0px; margin: 0px; width:100%;" >    
    
    <li style="padding: 0px; margin: 0px; width:100%; color:black; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">
        
        <img src="../arquivos/imagens/002_menu/impressora.png" 
                                                    style="cursor: pointer; float: left; padding-left: 5px; padding-top: 2px;"
                                                    onclick="printDiv('div_mostrar_produto');"
                                                    alt="Imprimit" width="30" height="30px">
        
        <img src="../arquivos/imagens/003_login/voltar.png" 
                                                    style="display: none; cursor: pointer; float: right"
                                                    onclick="window.open('controle_de_validade_0000_01_pagina_inicial.html'  + '?' + 'nome_do_usuario' + '=' + document.getElementById('usuario_logado_id_nome').value, 
                                                                '_parent');"
                                                    title="Voltar" width="80" height="30px">
    </li> 
                            
    <li align="center"  style="padding: 0px; margin: 0px; width:100%; color:black; font-family:  Arial, Helvetica, sans-serif; font-size: 150%;">
        <a style="color:black; font-family:  Arial, Helvetica, sans-serif; font-size: 150%; text-decoration: none;"
            onMouseover=" this.style.color='#fff'; this.style.backgroundColor='#23871C'; "
            onMouseout="  this.style.color='black'; this.style.backgroundColor='#D3D3D3'; "       
        > 
            Produto(s)
        </a>
    </li> 

    <li style="padding-top: 0px;">     
        <table id="tb_lista_de_produtos" border="0" cellpadding="0" cellspacing="0" style="width:100%; padding: 0; margin: 0;">     
            <tr>
                <td align="center" style="background-color: #D3D3D3; width:100%;">
                    
                    <ul id="lista_de_produtos_controle_de_vencimento"  style="list-style:none; padding: 0px; margin: 0px; width:100%;" > 
  
                    </ul>                                          
                </td>                  
            </tr>        
        </table>       
    </li> 
</ul>
</div>    
<!-- +++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++ 
-0
-1
-2
- #### div_mostrar_produto FIM #### --> 
<!-- 
-0
-1             
-2    
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++-->  















<!-- 
-0
-1
-2
- #### JQUERY INÍCIO #### --> 
<!-- 
-0
-1
-2    
-->  
<script type="text/javascript">    
     
     function aumentar_imagem( id ){
         
         if ( $('#'+id).hasClass("ativo") === true ){
             
            $('#'+id).animate({height:"150px",width:"150px"});
            
            $('#'+id).removeClass('ativo');
         }
         else{
            
            $('#'+id).animate({height:"500px",width:"500px"});
            
            $('#'+id).addClass('ativo');           
        }
     }     
     
     // COLOCAR O ID DA PLANILHA DE CONTROLE GOOGLE
     function baixar_tabela_de_produtos_proximos_do_vencimento_html(){
//INÍCIO - BAIXANDO TABELA PRODUTOS POR EAN  
    try{
        var id_planilha = "1MdvbcdsVh7_v4ReAoN_fk4Qx1Tup2Xoz95ECzH9DM28";
        var url = "https://sheets.googleapis.com/v4/spreadsheets/"+ id_planilha +"/values/A:D?key=AIzaSyBwiMCywJRFQHuuksWdhqwjOrR5mDaWJYs";
        
        $.ajax({
            url: url,
            success: function(data) {
                document.getElementById("tabela_de_produtos_proximos_do_vencimento_xls").value = JSON.stringify(data);
            },
            error : function(error) {
                //alert(error);
            }
        });
    }catch(Exception){}
//FIM - BAIXANDO TABELA PRODUTOS POR EAN           
     }

    
jQuery(document).ready(function(){
    
    setTimeout(function(){ 
        
        //baixar_tabela_de_produtos_proximos_do_vencimento_html();     
        var count_x = 1;
        baixar_tabela_de_produtos_proximos_do_vencimento( count_x );
    }, 0);
    
    setTimeout(function(){ setando_parametros(); }, 0);

});




function setando_parametros(){
//INÍCIO - BAIXANDO TABELA PRODUTOS POR EAN  
    try{
        
    //captura a url da página
    var url = window.location.href; 
    //alert("URL CAPTURADA: \n\n" + url);
    
    //tenta localizar o ?
    var res = url.split('?');
    
    // Verificando se a página tem parâmetros
    if (res[1] === undefined) {
        //alert('página sem parâmetros.');                                             // _parent        _blank
        window.location.href = '../index.html';
    }
    else{
        //alert('página tem parâmetros.');
        
        if (res[1] !== undefined) {
		//tenta localizar os & (pode haver mais de 1)
            var parametros = res[1].split('&');
            //alert('Parametros encontrados:\n' + parametros);
        
            for( var cont = 0; cont < parametros.length; cont++ ){                  
                if( cont === 1 ){

                    if( parametros[cont] !== undefined ){
                
                        var dados = parametros[cont].split('=');
                
                        //alert(
                        //    'Parametro Encontrado: ' + dados[0] + '\n' +
                        //    'Valor Parâmetro: ' + dados[1]
                        //);
                        var nome_do_parametro = dados[0];
                        var valor_do_parametro = dados[1];
                        
                        recebendo_e_tratando_parametros( nome_do_parametro, valor_do_parametro );
                    }
                }
                else{
                    
                    if( parametros[cont] !== undefined ){
                
                        var dados = parametros[cont].split('=');
                
                        //alert(
                        //    'Parametro Encontrado: ' + dados[0] + '\n' +
                        //    'Valor Parâmetro: ' + dados[1]
                        //);
                        var nome_do_parametro = dados[0];
                        var valor_do_parametro = dados[1];
                        
                        recebendo_e_tratando_parametros( nome_do_parametro, valor_do_parametro );
                    }
                }
            }
        }
    }    
                
    }catch(Exception){}
//FIM - BAIXANDO TABELA PRODUTOS POR EAN           
}

//recebendo parâmetros
function recebendo_e_tratando_parametros( nome_do_parametro, valor_do_parametro ){
     try{
         
         //alert('\nnome_do_parametro: ' + nome_do_parametro + '\nvalor_do_parametro: ' + valor_do_parametro );
         
         document.getElementById("usuario_logado_id_nome").value = valor_do_parametro;     
         
    }catch(Exception){}
}

    
jQuery(window).resize(function() {

    var browser_width2 = jQuery(window).width();

});











///////////////////////////////////////////////////////////////////////////////////////////////////////////   
///////////////////////////////////////////////////////////////////////////////////////////////////////////        
        function enviando_produto_proximo_do_vencimento_js_dentro_do_html( ean, qtd, data, material_rec, umb_rec ){
            try{
                
                //alert( document.getElementById("usuario_logado_id_nome").value );
                var usuario_logado_nome = document.getElementById("usuario_logado_id_nome").value;
                
                var usuario_logado_autorizacao = document.getElementById("usuario_logado_autorizacao").value;
                
                var sel = document.getElementById('estabelecimento');
                var opt = sel.options[sel.selectedIndex];
                //var estabelecimento_selected = opt.value;
                var estabelecimento_selected = opt.text;
                
                //document.getElementById("div_conversa").innerHTML = mensagem_a_enviar;
                
                //*
                if ( ean.trim() === undefined || ean.trim() === "" || ean.trim() === null){
                    
                    //alert("Escreva algo para poder ser enviado!\n");
                }
                
                else {
                    
                    //alert( ean + " - " + qtd + " - " + data );
                
                    setTimeout(function(){ 
                        var now = new Date();
                        var id = now.getDate() + "/" + now.getMonth() + "/" + now.getFullYear() + " - " + 
                             now.getHours() + ":" + now.getMinutes() + ":" + now.getSeconds() + "." + now.getMilliseconds();
                        //alert( " id - " + id );
                     
                        var comando = "cadastrar";
                                                //https://docs.google.com/forms/d/1uTliHHrmR5OsPD0z-ByN-fZrkWDtg1TvPtIHy_i8F1I/edit?usp=sharing
                        var id_formulario_id = "1FAIpQLSeDijfHYcQknyDb6OVpL-y9ttc4qgfjj68Q2Ce4ISxZNDUVhA"; //id_formulario_tabela_controle_de_validade;
                        //alert( " id_formulario_id - " + id_formulario_id );
                                
var _entry_formulario_controle_de_validade_id_texto = "833181104"; 
var _entry_formulario_controle_de_validade_id_ESTABELECIMENTO = "1076878183";
var _entry_formulario_controle_de_validade_id_REMETENTE = "1402856830";
var _entry_formulario_controle_de_validade_id_DATA_DE_VENCIMENTO = "1188720136";
var _entry_formulario_controle_de_validade_id_QUANTIDADE = "802028795";
var _entry_formulario_controle_de_validade_id_EAN = "148684082";
var _entry_formulario_controle_de_validade_id_MATERIAL = "1370090050";
var _entry_formulario_controle_de_validade_id_UMB = "1276313150";

                        var id_txt                = _entry_formulario_controle_de_validade_id_texto; 
                        var id_ESTABELECIMENTO    = _entry_formulario_controle_de_validade_id_ESTABELECIMENTO;
                        var id_REMETENTE          = _entry_formulario_controle_de_validade_id_REMETENTE;
                        var id_DATA_DE_VENCIMENTO = _entry_formulario_controle_de_validade_id_DATA_DE_VENCIMENTO;
                        var id_QUANTIDADE         = _entry_formulario_controle_de_validade_id_QUANTIDADE;
                        var id_EAN                = _entry_formulario_controle_de_validade_id_EAN;
                        var id_MATERIAL           = _entry_formulario_controle_de_validade_id_MATERIAL;
                        var id_UMB                = _entry_formulario_controle_de_validade_id_UMB;
                     
                        //////////////////////////////////////////
                        var jm_id = exportar_Para_Alfabeto_JM_Sem_Arroba( id.trim() );
                        var jm_comando = exportar_Para_Alfabeto_JM_Sem_Arroba( comando.trim() );
                        var jm_auto_quantidade_de_alteracoes = "0";

                        var jm_destinatario = exportar_Para_Alfabeto_JM_Sem_Arroba( estabelecimento_selected );
                        var jm_remetente = exportar_Para_Alfabeto_JM_Sem_Arroba( usuario_logado_nome );
                        var jm_data = exportar_Para_Alfabeto_JM_Sem_Arroba( data );
                        var jm_qtd = exportar_Para_Alfabeto_JM_Sem_Arroba( qtd );
                        var jm_ean = exportar_Para_Alfabeto_JM_Sem_Arroba( ean );
                        var jm_material = exportar_Para_Alfabeto_JM_Sem_Arroba( material_rec );
                        var jm_umb = exportar_Para_Alfabeto_JM_Sem_Arroba( umb_rec );
                                                                                       
                        var id_txt2 = "@" + 
                            jm_id + "j" + 
                            jm_comando + "j" + 
                            jm_auto_quantidade_de_alteracoes + "j" +                            
                            jm_destinatario  + "j" +  
                            jm_remetente  + "j" +    
                            jm_data + "j" + 
                            jm_qtd + "j" + 
                            jm_ean + "j" +
                            jm_material + "j" + 
                            jm_umb +
                            "@";
                        //////////////////////////////////////////
                
                        var GET_URL = "https://docs.google.com/forms/d/e/" + id_formulario_id + "/formResponse" +
                            "?entry." + id_txt + "=" + id_txt2 + 
                            "&entry." + id_ESTABELECIMENTO + "=" + estabelecimento_selected + 
                            "&entry." + id_REMETENTE + "=" + usuario_logado_nome + 
                            "&entry." + id_DATA_DE_VENCIMENTO + "=" + data + 
                            "&entry." + id_QUANTIDADE + "=" + qtd + 
                            "&entry." + id_EAN + "=" + ean + 
                            "&entry." + id_MATERIAL + "=" + material_rec + 
                            "&entry." + id_UMB + "=" + umb_rec;
                    
                        try{
                           
                                                     
                            $.post( GET_URL,
                                function(data, status){
                                    alert("Data: " + data + "\nStatus: " + status);
                                }
                            );
                            
                            
                            alert("Produto - " + ean + " - " + "Adicionado com sucesso!" );
                            //window.open('controle_de_validade_0001_01_adicionar_produto.html?' + "usuario_logado" + "=" + usuario_logado_nome.trim(), '_parent');
                            
                            window.location.href = 'controle_de_validade_0000_01_pagina_inicial.html?' + "usuario_logado" + "=" + usuario_logado_nome.trim();

                        }catch(Exception){alert( " Exception - " + Exception );}         
                                            
                    }, 0);
                                        
                }
                //*/
            }catch(Exception){
                
                document.getElementById("div_conversa").innerHTML = "enviar_mensagem -- " + Exception;
            }     
        }
///////////////////////////////////////////////////////////////////////////////////////////////////////////   
///////////////////////////////////////////////////////////////////////////////////////////////////////////


</script>
<!-- 
-0
-1
-2
- #### JQUERY FIM #### --> 
<!-- 
-0
-1
-2    
+++++++++++++++++++++++++++++++++++++++++++++++++++++++++   
-->



    </body>
</html>
